{# Use base layout shared across acute flows #}
{% extends "prototypes/acute/acute-layout.html" %}

{# Page-level configuration: section, navigation and heading #}
{% set hub = "Your health" %}                            {# Breadcrumb label or category #}
{% set backLink = true %}                                {# Enables default back link #}
{% set pageHeading = "Hospital and specialist appointments" %}
{% set pageDescription = "View and manage your upcoming and past hospital appointments." %}

{% block content %}

<!-- GRID WRAPPER -->
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    <!-- PAGE HEADING AREA -->
    <div class="nhsapp-section-heading">

      {# Misplaced <title> tag inside body â€“ should be removed #}
      <title>Review your request</title>

      {# Optional branding, trust info, or service indicator banner #}
      {% include "components/provider-banner/include.html" %}
    </div>

    <!-- SUCCESS PANEL -->
    <div class="nhsapp-panel">
      <h1 class="nhsapp-panel__title">
        Your request to reschedule has been submitted
      </h1>
    </div>

    <!-- SECTION: Requested appointment summary -->
    <div class="nhsapp-section-heading">
      <h2 class="nhsuk-heading-s">Your requested appointment details</h2>
    </div>

    <dl class="nhsuk-summary-list">

      <!-- MONDAY (from checkbox form) -->
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">Monday 7 July 2025</dt>
        <dd class="nhsuk-summary-list__value">
          {% if data['mary-monday'] %}
            {% if data['mary-monday'] | length > 1 %}
              {{ data['mary-monday'] | join(', ') }}   {# Join multiple values with commas #}
            {% else %}
              {{ data['mary-monday'] }}                 {# Single selection #}
            {% endif %}
          {% else %}
            No time selected for Monday
          {% endif %}
        </dd>
      </div>

      <!-- TUESDAY -->
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">Tuesday 8 July 2025</dt>
        <dd class="nhsuk-summary-list__value">
          {% if data['mary-tuesday'] %}
            {% if data['mary-tuesday'] | length > 1 %}
              {{ data['mary-tuesday'] | join(', ') }}
            {% else %}
              {{ data['mary-tuesday'] }}
            {% endif %}
          {% else %}
            No time selected for Tuesday
          {% endif %}
        </dd>
      </div>

      <!-- Appointment type (static content) -->
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">Appointment type</dt>
        <dd class="nhsuk-summary-list__value">Asthma</dd>
      </div>

      <!-- Location -->
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">Location</dt>
        <dd class="nhsuk-summary-list__value">
          Northern General Hospital, Entrance G, Sheffield, S5 7AU
        </dd>
      </div>

      <!-- Clinician -->
      <div class="nhsuk-summary-list__row">
        <dt class="nhsuk-summary-list__key">Clinician</dt>
        <dd class="nhsuk-summary-list__value">Ahmet Kaya</dd>
      </div>

    </dl>

    <!-- NEXT STEPS EXPLANATION -->
    <h3 class="nhsuk-heading-m nhsuk-u-margin-bottom-4">What happens now</h3>
    <p>You do not need to do anything while the booking team is processing your request to reschedule</p>
    <p class="nhsuk-u-margin-bottom-5">
      Rescheduling your appointment will take approximately 48 hours. The original appointment may remain visible during that time.
    </p>

    <!-- VIEW APPOINTMENT BUTTON -->
    <a class="nhsuk-button nhsapp-button--secondary nhsapp-button"
       data-module="nhsuk-button"
       href="app-in-review.html">
      View this appointment
    </a>

    <!-- VIEW ALL LINK -->
    <p>
      <a style="text-decoration: underline;" href="aggregator-pending.html">
        View all appointments
      </a>
    </p>

    <!-- SUPPORT SECTION -->
    <div class="nhsuk-u-margin-top-6">
      <fieldset class="nhsuk-fieldset">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h2 class="nhsuk-fieldset__heading">Get help with this task</h2>
        </legend>
        <div class="nhsuk-body">
          <p>Contact the booking team on <a href="">0XXXX XXX XXX</a></p>
        </div>
      </fieldset>
    </div>

    <!-- FOOTER LINKS -->
    <footer role="contentinfo" class="nhsuk-footer">
      <div class="nhsuk-footer-container">
        <div class="nhsuk-width-container">
          <h2 class="nhsuk-u-visually-hidden">Support links</h2>
          <ul class="nhsuk-footer__list">
            <li class="nhsuk-footer__list-item">
              <a class="nhsuk-footer__list-item-link" href="#">Terms of use</a>
            </li>
            <li class="nhsuk-footer__list-item">
              <a class="nhsuk-footer__list-item-link" href="#">Privacy policy</a>
            </li>
            <li class="nhsuk-footer__list-item">
              <a class="nhsuk-footer__list-item-link" href="#">Cookie policy</a>
            </li>
            <li class="nhsuk-footer__list-item">
              <a class="nhsuk-footer__list-item-link" href="#">Accessibility statement</a>
            </li>
          </ul>
        </div>
      </div>
    </footer>

  </div>
</div>

{% endblock %}
