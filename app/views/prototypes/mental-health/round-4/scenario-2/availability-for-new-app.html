<!DOCTYPE html>
{% extends 'prototypes/mental-health/mental-health-layout.html' %}

{# Set page variables used in the layout #}
{% set hub = "Services" %}
{% set backLink = true %}
{% set pageHeading = "Select your availability for a new appointment" %}

{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    {# Include a banner component for provider info #}
    {% include "components/provider-banner/include.html" %}

    {# Start the form. 'method="post"' sends data, 'action' is the next page, 'novalidate' skips browser validation #}
    <form method="post" action="reschedule-review" novalidate>
      <fieldset class="nhsuk-fieldset">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--xl">
          <h1 class="nhsuk-fieldset__heading">
            Select preferred days and times for your new appointment
          </h1>
        </legend>

        {{ insetText({
          html: "<p>The more flexible you are with your availability, the more likely we are to find a new appointment that works for you.</p>"
        }) }}

        <fieldset class="nhsuk-fieldset" aria-describedby="available-hint">
          <div class="nhsuk-radios nhsuk-radios--conditional nhsuk-u-margin-top-3">

            <!-- Option 1: Available any time -->
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="available-any" name="available-choice" type="radio" value="any" aria-controls="conditional-available-any" aria-expanded="false">
              <label class="nhsuk-label nhsuk-radios__label" for="available-any">
                Any day and time
              </label>
            </div>

            <!-- Option 2: Choose specific days and times -->
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="available-select" name="available-choice" type="radio" value="select" aria-controls="conditional-available-select" aria-expanded="false">
              <label class="nhsuk-label nhsuk-radios__label" for="available-select">
                Choose preferred days and times
              </label>
            </div>

            <!-- Conditional section -->
            <div class="nhsuk-radios__conditional nhsuk-radios__conditional--hidden" id="conditional-available-select">
              <div class="nhsuk-form-group">
                <fieldset class="nhsuk-fieldset" aria-describedby="available-days-hint">
                  <div class="nhsuk-checkboxes nhsuk-checkboxes--conditional">
                    {% for day in ["Mondays", "Tuesdays", "Wednesdays", "Thursdays", "Fridays"] %}
                      <div class="nhsuk-checkboxes__item">
                        <input class="nhsuk-checkboxes__input"
                          id="{{ day | lower }}"
                          name="available-days[]"
                          type="checkbox"
                          value="{{ day }}"
                          aria-controls="conditional-{{ day | lower }}"
                          aria-expanded="false">
                        <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}">
                          {{ day }}
                        </label>
                      </div>

                      <div class="nhsuk-checkboxes__conditional nhsuk-checkboxes__conditional--hidden" id="conditional-{{ day | lower }}">
                        <div class="nhsuk-form-group">
                          <fieldset class="nhsuk-fieldset">
                            <div class="nhsuk-checkboxes">
                              {% for slot in [
                                {"label": "Any time", "hint": ""},
                                {"label": "Morning", "hint": "8:00am – 12:00pm"},
                                {"label": "Early afternoon", "hint": "12:00pm – 3:00pm"},
                                {"label": "Late afternoon", "hint": "3:00pm – 6:00pm"}
                              ] %}
                                <div class="nhsuk-checkboxes__item">
                                  <input class="nhsuk-checkboxes__input"
                                    id="{{ day | lower }}-{{ slot.label | lower | replace(' ', '-') }}"
                                    name="{{ day | lower }}-times[]"
                                    type="checkbox"
                                    value="{{ slot.label }}">
                                  <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}-{{ slot.label | lower | replace(' ', '-') }}">
                                    {{ slot.label }}
                                    {% if slot.hint %}<span class="nhsuk-hint">{{ slot.hint }}</span>{% endif %}
                                  </label>
                                </div>
                              {% endfor %}
                            </div>
                          </fieldset>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </fieldset>
              </div>
            </div>
          </div>
        </fieldset>

        <div class="nhsuk-u-margin-top-6">
          {{ button({
            text: "Continue",
            attributes: { type: "submit" },
            classes: "nhsapp-button"
          }) }}
        </div>
      </fieldset>
    </form>

    {# Help section with contact info #}
    <div>
      <fieldset class="nhsuk-fieldset">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h1 class="nhsuk-fieldset__heading">
            Get help with this task
          </h1>
        </legend>
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h3 class="nhsuk-fieldset__legend">Contact the booking team on <a href="">0XXXX XXX XXX</a></h3>
        </legend>
      </fieldset>
    </div>

    {# Footer with support links #}
    <footer role="contentinfo">
      <div class="nhsuk-footer-container">
        <div class="nhsuk-width-container">
          <h2 class="nhsuk-u-visually-hidden">Support links</h2>
          <div class="nhsuk-footer">
            <ul class="nhsuk-footer__list">
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Terms of use</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Privacy policy</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Cookie policy</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Accessibility statement</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
</div>
{% endblock %}
