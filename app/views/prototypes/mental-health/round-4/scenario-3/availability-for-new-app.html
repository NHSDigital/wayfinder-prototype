<!DOCTYPE html>
{% extends 'prototypes/mental-health/mental-health-layout.html' %}

{# Set page variables used in the layout #}
{% set hub = "Services" %}
{% set backLink = true %}
{% set pageHeading = "Select your availability for a new appointment" %}

{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    {# Include a banner component for provider info #}
    {% include "components/provider-banner/include.html" %}

    {# Start the form. 'method="post"' sends data, 'action' is the next page, 'novalidate' skips browser validation #}
    <form method="post" action="reschedule-review" novalidate>

      {# Group the form content using a fieldset #}
      <fieldset class="nhsuk-fieldset">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--xl">
          <h1 class="nhsuk-fieldset__heading">
            Select preferred days and times for your new appointment
          </h1>
        </legend>

        {# Message shown in an inset box #}
        {{ insetText({
          html: "<p> The more flexible you are with your availability, the more likely we are to find 
          a new appointment that works for you.</p>"
        }) }}

        {# Start the conditional radio button section #}
        <fieldset class="nhsuk-fieldset" aria-describedby="unavailable-hint">
          <div class="nhsuk-radios nhsuk-radios--conditional nhsuk-u-margin-top-3">

            {# Option 1: User is available any time #}
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="unavailable-no" name="unavailable-choice" type="radio" value="none" aria-controls="conditional-unavailable-no" aria-expanded="false">
              <label class="nhsuk-label nhsuk-radios__label" for="unavailable-no">
                Any day and time
              </label>
            </div>

            {# Option 2: User wants to choose specific days and times #}
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="unavailable-yes" name="unavailable-choice" type="radio" value="select" aria-controls="conditional-unavailable-yes" aria-expanded="false">
              <label class="nhsuk-label nhsuk-radios__label" for="unavailable-yes">
                Choose preferred days and times 
              </label>
            </div>

            {# Conditional section that appears if "Choose preferred days and times" is selected #}
            <div class="nhsuk-radios__conditional nhsuk-radios__conditional--hidden" id="conditional-unavailable-yes">
              <div class="nhsuk-form-group">
                <fieldset class="nhsuk-fieldset" aria-describedby="unavailable-days-hint">

                  {# Loop through weekdays to create checkboxes for each day #}
                  <div class="nhsuk-checkboxes nhsuk-checkboxes--conditional">
                    {% for day in ["Mondays", "Tuesdays", "Wednesdays", "Thursdays", "Fridays"] %}
                      <div class="nhsuk-checkboxes__item">
                        {# Checkbox for the day. 'name="unavailable-days[]"' collects multiple days as a list #}
                        <input class="nhsuk-checkboxes__input"
                          id="{{ day | lower }}"
                          name="unavailable-days[]"
                          type="checkbox"
                          value="{{ day }}"
                          aria-controls="conditional-{{ day | lower }}"
                          aria-expanded="false">
                        <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}">
                          {{ day }}
                        </label>
                      </div>

                      {# Conditional section for time slots on that day #}
                      <div class="nhsuk-checkboxes__conditional nhsuk-checkboxes__conditional--hidden" id="conditional-{{ day | lower }}">
                        <div class="nhsuk-form-group">
                          <fieldset class="nhsuk-fieldset">

                            {# Time slot checkboxes for that day. 'name="{{ day }}-times[]"' collects multiple times #}
                            <div class="nhsuk-checkboxes">
                              <div class="nhsuk-checkboxes__item">
                                <input class="nhsuk-checkboxes__input" id="{{ day | lower }}-any" name="{{ day | lower }}-times[]" type="checkbox" value="Any time">
                                <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}-any">
                                  Any time <span class="nhsuk-hint"></span>
                                </label>
                              </div>                              
                              <div class="nhsuk-checkboxes__item">
                                <input class="nhsuk-checkboxes__input" id="{{ day | lower }}-morning" name="{{ day | lower }}-times[]" type="checkbox" value="Morning">
                                <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}-morning">
                                  Morning <span class="nhsuk-hint">8:00am – 12:00pm</span>
                                </label>
                              </div>
                              <div class="nhsuk-checkboxes__item">
                                <input class="nhsuk-checkboxes__input" id="{{ day | lower }}-early" name="{{ day | lower }}-times[]" type="checkbox" value="Early afternoon">
                                <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}-early">
                                  Early afternoon <span class="nhsuk-hint">12:00pm – 3:00pm</span>
                                </label>
                              </div>
                              <div class="nhsuk-checkboxes__item">
                                <input class="nhsuk-checkboxes__input" id="{{ day | lower }}-late" name="{{ day | lower }}-times[]" type="checkbox" value="Late afternoon">
                                <label class="nhsuk-label nhsuk-checkboxes__label" for="{{ day | lower }}-late">
                                  Late afternoon <span class="nhsuk-hint">3:00pm – 6:00pm</span>
                                </label>
                              </div>
                            </div>
                          </fieldset>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </fieldset>
              </div>
            </div>
          </div>
        </fieldset>

        {# Submit button to continue to the next page #}
        <div class="nhsuk-u-margin-top-6">
          {{ button({
            text: "Continue",
            attributes: { type: "submit" },
            classes: "nhsapp-button"
          }) }}
        </div>
      </fieldset>
    </form>

    {# Help section with contact info #}
    <div>
      <fieldset class="nhsuk-fieldset">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h1 class="nhsuk-fieldset__heading">
            Get help with this task
          </h1>
        </legend>
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h3 class="nhsuk-fieldset__legend">Contact the booking team on <a href="">0XXXX XXX XXX</a></h3>
        </legend>
      </fieldset>
    </div>

    {# Footer with support links #}
    <footer role="contentinfo">
      <div class="nhsuk-footer-container">
        <div class="nhsuk-width-container">
          <h2 class="nhsuk-u-visually-hidden">Support links</h2>
          <div class="nhsuk-footer">
            <ul class="nhsuk-footer__list">
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Terms of use</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Privacy policy</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Cookie policy</a>
              </li>
              <li class="nhsuk-footer__list-item">
                <a class="nhsuk-footer__list-item-link" href="#">Accessibility statement</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
</div>
{% endblock %}
